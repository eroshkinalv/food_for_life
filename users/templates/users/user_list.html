{% extends "restaurant/base.html" %}
{% load my_tags %}
{% block title %}Пльзователи{% endblock %}
{% block content %}

{% include 'restaurant/header.html' %}

<div class="container mt-5">
<h2 class="text-yellow">Список пользователей</h2>
<table class="table table-striped table-bordered table-hover text-white">
    <thead class="bg-dark">
        <tr>
            <th>Email</th>
            <th>Ф. И. О.</th>
            <th>Имя пользователя</th>
            <th>Телефон</th>
            <th>Аватар</th>
            <th>Страна</th>
            <th>Статус</th>
        </tr>
    </thead>
    <tbody>
        {% for user in user_list %}
            {% if perms.users.can_manage_users and not user.is_superuser %}
            <tr>
                <td>{{ user.email }}</td>
                <td>{{ user.first_name }} {{ user.last_name }}</td>
                <td>{{ user.username }}</td>
                <td>{{ user.phone_number }}</td>
                <td><img src="{{ user.avatar | media_filter }}" class="img-fluid rounded-circle" alt="avatar" style="max-width: 50px; max-height: 50px;"></td>
                <td>{{ user.country }}</td>
                <td>
                    {% if user.is_blocked %}
                        <span class="text-dark">Заблокировано</span>
                    {% else %}
                        <span class="text-dark">Разблокировано</span>
                    {% endif %}
                </td>
                <td>
                    {% if perms.users.can_block_users or user.is_staff %}
                        {% if user.is_blocked %}
                            <a href="{% url 'users:user_block' user.id %}" class="btn btn-dark btn-sm">Разблокировать</a>
                        {% else %}
                            <a href="{% url 'users:user_block' user.id %}" class="btn btn-dark btn-sm">Заблокировать</a>
                        {% endif %}
                    {% endif %}
                </td>
            </tr>
            {% endif %}
        {% endfor %}
    </tbody>
</table>
{% endblock %}